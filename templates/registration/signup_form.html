{% extends 'base.html' %}

{% block title %}
  {% if user_type == 'company' %}
    Înregistrare Angajator
  {% else %}
    Înregistrare Candidat
  {% endif %}
   - JoburiPentruRomani
{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto mt-10 bg-white p-8 rounded-lg shadow-md border border-gray-200">
  <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">
    {% if user_type == 'company' %}
      Înregistrare Angajator
    {% else %}
      Înregistrare Candidat
    {% endif %}
  </h2>

  <form method="post">
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
        {% for error in form.non_field_errors %}
          <p>{{ error }}</p>
        {% endfor %}
      </div>
    {% endif %}

    {% for field in form %}
      <div class="mb-4">
        <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
        {{ field }} {# Render the widget directly #}
        {% if field.help_text %}
          <p class="mt-1 text-xs text-gray-500">{{ field.help_text|safe }}</p>
        {% endif %}
        {% if field.errors %}
          <div class="mt-1 text-xs text-red-600">
            {% for error in field.errors %}
              <p>{{ error }}</p>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    {% endfor %}

    <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-300 mt-6">
      Înregistrează-te
    </button>
  </form>

  <div class="mt-4 text-center">
    <a href="{% url 'accounts:login' %}" class="text-sm text-indigo-600 hover:underline">Ai deja cont? Autentifică-te</a>
  </div>
</div>

{# Add basic styling for form inputs via JS or CSS if needed, #}
{# or customize the widget attributes in the form definition #}
<script>
  // Add basic Tailwind classes to form inputs generated by Django
  document.addEventListener('DOMContentLoaded', function() {
    const formInputs = document.querySelectorAll('form input:not([type="checkbox"]):not([type="hidden"]), form select, form textarea');
    formInputs.forEach(input => {
      input.classList.add('mt-1', 'block', 'w-full', 'px-3', 'py-2', 'border', 'border-gray-300', 'rounded-md', 'shadow-sm', 'focus:outline-none', 'focus:ring-indigo-500', 'focus:border-indigo-500', 'sm:text-sm');
    });
    // Style checkboxes differently if needed
    const checkboxes = document.querySelectorAll('form input[type="checkbox"]');
     checkboxes.forEach(checkbox => {
        checkbox.classList.add('h-4', 'w-4', 'text-indigo-600', 'focus:ring-indigo-500', 'border-gray-300', 'rounded');
        // Optionally wrap label if Django doesn't
        // let label = checkbox.closest('label');
        // if (label) {
        //     label.classList.add('flex', 'items-center', 'space-x-2');
        // }
     });
  });
</script>

{% endblock %}
